server {
    listen 80;  
    # Listen on port 80 (default HTTP port)

    server_name 3.26.93.74;  
    # Use environment variable for the server name (set in docker-compose)

    root /var/www/html/public;  
    # The root directory where your Laravel public files are located

    index index.php index.html;  
    # Default files served when accessing a directory

    location / {
        try_files $uri /index.php?$query_string;  
        # Try to serve the requested file
        # If not found, pass the request to index.php (Laravel handles the routing)
    }

    location ~ \.php$ {
        fastcgi_pass app:9000;  
        # Send PHP requests to PHP-FPM container (defined as service name in docker-compose)
        
        fastcgi_index index.php;  
        # Default index file for PHP

        include fastcgi_params;  
        # Include default FastCGI parameters

        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;  
        # Full path to the PHP script file

        fastcgi_param PATH_INFO $fastcgi_path_info;  
        # Pass path info to PHP
    }

    location ~ /\.ht {
        deny all;  
        # For security: deny access to .htaccess and other hidden files 
    }
}
